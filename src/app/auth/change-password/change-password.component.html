<header class="sybox-primary-header">
  <h1>Changement mot de passe</h1>
</header>
<main focusOnNavigation>
  <div class="example-container">
    <div class="form-container">
      <form [formGroup]="changePasswordForm" (submit)="onSubmit()" appDisableAutofill>

        
        <div class="logo">
          <img [lazyLoad]="authImage">
        </div>


        <div fxLayout="column" fxLayoutAlign="center center" *ngIf="loading" class="dialog-action" style="min-height:100px;">
          <h4 *ngIf="f.email.value==null||f.email.value==undefined">Chargement en cours...</h4>
          <h4 *ngIf="f.email.value!=null&&f.email.value!=undefined">Changement du mot de passe en cours...</h4>
          <mat-spinner color="accent" [diameter]="40"></mat-spinner>
        </div>

        <div *ngIf="!loading">

          <h4>
            Bonjour,
            <strong>{{f.email.value}}</strong><br />Veuillez saisir votre nouveau mot de passe sur les champs ci-dessous puis cliquer sur <strong>changer mot de passe</strong>.
          </h4>

          <mat-form-field class="form-field" appearance="outline" color="accent">
            <mat-label>
              Mot de passe
            </mat-label>
            <input appDisableAutofill matInput formControlName="newPassword" placeholder="Mot de passe" type="password" required autocomplete="off">
            <mat-error *ngIf="changePasswordForm.controls.newPassword.touched && changePasswordForm.controls.newPassword.invalid">
              <span *ngIf="changePasswordForm.controls.newPassword.errors.required">Ce champ est obligatoire.</span>
            </mat-error>
          </mat-form-field>

          <mat-form-field class="form-field" appearance="outline" color="accent">
            <mat-label>
              Confirmer Mot de passe
            </mat-label>
            <input matInput formControlName="confirmPassword" placeholder="Mot de passe" type="password" required autocomplete="off">
            <mat-error *ngIf="changePasswordForm.controls.confirmPassword.touched && changePasswordForm.controls.confirmPassword.invalid">
              <span *ngIf="changePasswordForm.controls.confirmPassword.errors.required">Ce champ est obligatoire.</span>
            </mat-error>
            <mat-error *ngIf="!changePasswordForm.controls.newPassword.errors?.required &&!changePasswordForm.controls.confirmPassword.errors?.required &&(changePasswordForm.hasError('notSame')||changePasswordForm.invalid)">
              <span>Les mots de passe ne correspondent pas.</span>
            </mat-error>
          </mat-form-field>

          <div class="dialog-action" fxLayout="row" fxLayoutAlign="center center">
            <button [disabled]="loading" mat-flat-button color="accent" type="submit">
              Changer le mot de passe
            </button>
          </div>

        </div>

        <div class="orDivider" *ngIf="!loading">
          <div class="line"><mat-divider></mat-divider></div>
          <div class="text mat-typography">Ou</div>
          <div class="line"><mat-divider></mat-divider></div>
        </div>

        <div class="dialog-action" fxLayout="row" fxLayoutAlign="center center" *ngIf="!loading">
          <button mat-button color="accent" routerLink="/sds-login" type="button">Revenir sur l'Ã©cran de connexion</button>
        </div>

      </form>
    </div>
  </div>
</main>
