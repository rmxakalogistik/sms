<section id="qrcodeDialogComponent">
  <mat-toolbar id="top-toolbar" class="top-toolbar" [ngStyle.lt-sm]="{'height': '50px'}" [class.top-toolbar-is-mobile]="mobileQuery.matches" [class.mat-elevation-z0]="!isActive" [class.mat-elevation-z8]="isActive" [class.animated-header]="!isActivefadeInDown" [class.fadeInDown]="!isActivefadeInDown" [class.top-toolbar-fixed]="!fixedTolbar">
    <div class="dialog-action" fxLayout="column">
      <div class="dialog-action" fxLayout="row" fxLayoutAlign="start center">
        <button id="return-button" mat-icon-button (click)="close()" style="color:white;">
          <mat-icon>chevron_left</mat-icon>
        </button>
        <button mat-icon-button style="color:white;">
          <mat-icon>qr_code_scanner</mat-icon>
          <!-- <span style="vertical-align:middle !important;padding: 5px 5px 5px 0;font-size: 12px;">{{action|uppercase}}</span> -->
        </button>
        <span class="toolbar-spacer"></span>
        <div fxLayout="row" fxLayoutAlign="start center">
          <!-- <mat-form-field appearance="outline" *ngIf="availableDevices&&availableDevices.length>1">
            <mat-label>Choix de la cam√©ra </mat-label>
            <mat-select [value]="deviceSelected" (valueChange)="onDeviceSelectChange($event)">
              <mat-option value="">Aucun appareil s√©lectionn√©</mat-option>
              <mat-option *ngFor="let device of availableDevices" [value]="device.deviceId">{{device.label}}</mat-option>
            </mat-select>
          </mat-form-field> -->
    
          <!-- <button mat-mini-fab color="accent" (click)="toggleTorch()" *ngIf="torchAvailable$ | async">
            <mat-icon *ngIf="torchEnabled">flash_on</mat-icon>
            <mat-icon *ngIf="!torchEnabled">flash_off</mat-icon>
          </button> -->
          <mat-form-field style="color:white;">
            <mat-label>Choix de la cam√©ra </mat-label>
            <mat-select [value]="deviceSelected" (valueChange)="onDeviceSelectChange($event)">
              <mat-option value="">Aucun appareil s√©lectionn√©</mat-option>
              <mat-option *ngFor="let device of availableDevices" [value]="device.deviceId">{{device.label}}</mat-option>
            </mat-select>
          </mat-form-field>
          <button mat-icon-button style="color:white;">
            <mat-icon *ngIf="torchEnabled">flash_on</mat-icon>
            <mat-icon *ngIf="!torchEnabled">flash_off</mat-icon>
          </button>
        </div>
      </div>
    </div>
  </mat-toolbar>
  <div class="toolbar-and-wrapper-space" fxShow="true" fxShow.gt-xs="true"></div>

  <div class="content-wrapper" (onScroll)="detectScroll($event)">
    <div [hidden]="!hasDevices" class="video-container">

      <div class="scanner-shell" [hidden]="!hasDevices">
  
        <!--<mat-menu #appMenu="matMenu">
      <mat-selection-list>
        <mat-list-option checkboxPosition="start" (click)="toggleTryHarder()" [selected]="tryHarder">
          Enable Try-harder
        </mat-list-option>
        <mat-list-option checkboxPosition="start" (click)="toggleTorch()" [selected]="torchEnabled"
                         *ngIf="torchAvailable$ | async">
          Enable Torch
        </mat-list-option>
      </mat-selection-list>
    </mat-menu>-->
        <!--<h4>Scannez la vignette</h4>-->
  
        
  
        <div class="qr-scan-area">
          <!-- This is the NPM package in-charge of scanning the QR -->
          <zxing-scanner #zxingscanner  previewFitMode="cover"
                       [torch]="torchEnabled"
                       [device]="deviceCurrent"
                       (deviceChange)="onDeviceChange($event)"
                       (scanSuccess)="scanSuccessHandler($event)"
                       [formats]="formatsEnabled"
                       [tryHarder]="tryHarder"
                       (permissionResponse)="onHasPermission($event)"
                       (camerasFound)="onCamerasFound($event)"
                       (torchCompatible)="onTorchCompatible($event)"></zxing-scanner>
          <div class="qr-area">
            <div class="area"></div>
            <!--<span class="dashed-h"></span>
            <span class="dashed-v"></span>-->
          </div>
        </div>
  
        <!--<zxing-scanner #zxingscanner
                       [torch]="torchEnabled"
                       [device]="deviceCurrent"
                       (deviceChange)="onDeviceChange($event)"
                       (scanSuccess)="scanSuccessHandler($event)"
                       [formats]="formatsEnabled"
                       [tryHarder]="tryHarder"
                       (permissionResponse)="onHasPermission($event)"
                       (camerasFound)="onCamerasFound($event)"></zxing-scanner>-->
  
        <!--<section class="results" *ngIf="qrResultString">
      <div>
        <small>Result</small>
        <strong>{{ qrResultString }}</strong>
      </div>
      <button mat-icon-button (click)="clearResult()">&times;</button>
    </section>-->
  
      </div>
  
      <ng-container *ngIf="hasPermission === undefined">
  
        <h2>Waiting for permissions.</h2>
  
        <blockquote>
          If your device does not has cameras, no permissions will be asked.
        </blockquote>
  
      </ng-container>
  
      <ng-container *ngIf="hasPermission === false">
  
        <h2>You denied the camera permission, we can't scan anything without it. üò™</h2>
  
      </ng-container>
  
      <ng-container *ngIf="hasDevices === undefined">
  
        <h2>Couldn't check for devices.</h2>
  
        <blockquote>
          This may be caused by some security error.
        </blockquote>
  
      </ng-container>
  
      <ng-container *ngIf="hasDevices === false">
  
        <h2>No devices were found.</h2>
  
        <blockquote>
          I believe your device has no media devices attached to.
        </blockquote>
  
      </ng-container>
  
      <!--<h4>ou Scannez le qrcode imprim√© sur le PV</h4>
          <mat-form-field *ngIf="availableDevices&&availableDevices.length>0">
        <mat-label>Camera </mat-label>
        <mat-select [value]="deviceSelected" (valueChange)="onDeviceSelectChange($event)">
          <mat-option value="">Aucun appareil s√©lectionn√©</mat-option>
          <mat-option *ngFor="let device of availableDevices" [value]="device.deviceId">{{device.label}}</mat-option>
        </mat-select>
      </mat-form-field>
          <zxing-scanner #zxingscanner
                         [device]="deviceCurrent"
                         [tryHarder]="tryHarder"
                         (deviceChange)="onDeviceChange($event)"
                         (camerasFound)="onCamerasFound($event)"
                         [enable]="scannerEnabled"
                         (scanSuccess)="scanSuccessHandler($event)"
                         (scanComplete)="scanCompleteHandler($event)"></zxing-scanner>-->
    </div>
  </div>

</section>